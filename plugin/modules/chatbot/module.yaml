name: chatbot
description: AI chat sidebar
requires: [document, config, events, ai]

actions:
  extend_selection:
    title: "Extend Selection"
  edit_selection:
    title: "Edit Selection"

menus:
  - action: extend_selection
    context: [writer, calc]
  - action: edit_selection
    context: [writer, calc]

shortcuts:
  extend_selection:
    key: Q_MOD1
    context: [writer, calc]
  edit_selection:
    key: E_MOD1
    context: [writer, calc]

config:
  max_tool_rounds:
    type: int
    default: 15
    min: 1
    max: 50
    widget: number
    label: Max Tool Rounds

  system_prompt:
    type: string
    default: ""
    widget: textarea
    label: System Prompt

  image_provider:
    type: string
    default: endpoint
    widget: select
    label: Image Provider
    options:
      - value: endpoint
        label: LLM Endpoint
      - value: ai_horde
        label: AI Horde (free)

  extend_selection_max_tokens:
    type: int
    default: 70
    min: 10
    max: 4096
    widget: number
    label: Extend Selection Max Tokens

  edit_selection_max_new_tokens:
    type: int
    default: 0
    min: 0
    max: 4096
    widget: number
    label: Edit Selection Extra Tokens
    helper: "Extra tokens beyond original text length. 0 = same length as original."

  show_mcp_activity:
    type: boolean
    default: true
    widget: checkbox
    label: Show MCP Activity
    public: true
